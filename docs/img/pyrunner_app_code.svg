<!DOCTYPE svg PUBLIC "-//W3C//DTD SVG 1.1//EN" "http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd">
<svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" version="1.1" width="991px" height="991px" viewBox="-0.5 -0.5 991 991" content="&lt;mxfile modified=&quot;2019-03-29T20:48:34.599Z&quot; host=&quot;www.draw.io&quot; agent=&quot;Mozilla/5.0 (Macintosh; Intel Mac OS X 10_14_2) AppleWebKit/537.36 (KHTML, like Gecko) draw.io/8.8.0 Chrome/61.0.3163.100 Electron/2.0.2 Safari/537.36&quot; version=&quot;10.5.9&quot; etag=&quot;Om1TzFqhNZ6Pf8IUcXr5&quot; type=&quot;device&quot;&gt;&lt;diagram id=&quot;QsX2VJB9Mnsra_7MBVqk&quot;&gt;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&lt;/diagram&gt;&lt;/mxfile&gt;" style="background-color: rgb(255, 255, 255);"><defs/><g><rect x="140" y="830" width="850" height="160" fill="#ffffff" stroke="#000000" pointer-events="none"/><rect x="140" y="350" width="850" height="270" fill="#ffffff" stroke="#000000" pointer-events="none"/><g transform="translate(151.5,846.5)"><switch><foreignObject style="overflow:visible;" pointer-events="all" width="706" height="125" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: inline-block; font-size: 12px; font-family: &quot;Courier New&quot;; color: rgb(0, 0, 0); line-height: 1.2; vertical-align: top; width: 707px; white-space: nowrap; word-wrap: normal;"><div xmlns="http://www.w3.org/1999/xhtml" style="display:inline-block;text-align:inherit;text-decoration:inherit;"><div style="text-align: left"><div><b><font face="Helvetica">/my_project/config/<font color="#00994d">my_project.lst</font></font></b><font color="#00cc00"><br /></font><br />#PYTHON</div><div>#ID|PARENT_IDS|MAX_ATTEMPTS|RETRY_WAIT_TIME|PROCESS_NAME|MODULE_NAME|WORKER_NAME|ARGUMENTS|LOGFILE</div><div><span style="background-color: rgb(255 , 255 , 51)">1</span>|<b>-1</b>|1|0|Start Job|<b><font color="#ff0000">job</font></b>|JobStart||<b>$ENV{APP_LOG_DIR}</b>/start_job.log</div><div><span style="background-color: rgb(229 , 204 , 255)">2</span>|<span style="background-color: rgb(255 , 255 , 51)">1</span>|1|0|Download Delta File|<b><font color="#990099">process</font></b>|DownloadFile||<b>$ENV{APP_LOG_DIR}</b>/download_delta_file.log</div><div><span style="background-color: rgb(229 , 204 , 255)">3</span>|<span style="background-color: rgb(255 , 255 , 51)">1</span>|1|0|Read from Table|<font color="#990099"><b>process</b></font>|ReadTable||<b>$ENV{APP_LOG_DIR}</b><span>/read_table.log</span></div><div><span style="background-color: rgb(213 , 232 , 212)">4</span>|<span style="background-color: rgb(229 , 204 , 255)">2,3</span>|1|0|Write Results File|<b><font color="#990099">process</font></b>|WriteResults||<b>$ENV{APP_LOG_DIR}</b><span>/write_results.log</span></div><div>5|<span style="background-color: rgb(213 , 232 , 212)">4</span>|1|0|End Job|<b><font color="#ff0000">job</font></b>|JobEnd||<b>$ENV{APP_LOG_DIR}</b>/end_job.log</div></div></div></div></foreignObject><text x="353" y="69" fill="#000000" text-anchor="middle" font-size="12px" font-family="Courier New">[Not supported by viewer]</text></switch></g><g transform="translate(151.5,86.5)"><switch><foreignObject style="overflow:visible;" pointer-events="all" width="115" height="138" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: inline-block; font-size: 12px; font-family: Helvetica; color: rgb(0, 0, 0); line-height: 1.2; vertical-align: top; width: 116px; white-space: nowrap; word-wrap: normal; font-weight: bold;"><div xmlns="http://www.w3.org/1999/xhtml" style="display:inline-block;text-align:inherit;text-decoration:inherit;">/my_project<br />    ./<font color="#0066cc">config</font><br />        - <font color="#cc6600">app_profile</font><br />        - <font color="#00994d">my_project.lst</font><br />    ./<font color="#0066cc">data</font><br />    ./<font color="#0066cc">logs</font><br />    ./<font color="#0066cc">python</font><br />        - <font color="#ff0000">job.py</font><br />        - <font color="#990099">process.py</font><br />    ./<font color="#0066cc">temp</font><br /></div></div></foreignObject><text x="58" y="75" fill="#000000" text-anchor="middle" font-size="12px" font-family="Helvetica" font-weight="bold">[Not supported by viewer]</text></switch></g><g transform="translate(151.5,356.5)"><switch><foreignObject style="overflow:visible;" pointer-events="all" width="439" height="251" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: inline-block; font-size: 12px; font-family: &quot;Courier New&quot;; color: rgb(0, 0, 0); line-height: 1.2; vertical-align: top; width: 440px; white-space: nowrap; word-wrap: normal;"><div xmlns="http://www.w3.org/1999/xhtml" style="display:inline-block;text-align:inherit;text-decoration:inherit;"><div><font face="Helvetica"><b>/my_project/config/</b><font color="#cc6600" style="font-weight: bold">app_profile</font></font><br /></div><div><br /></div><div><div>export APP_NAME="my_project"</div><div>export APP_ROOT_DIR="$(cd $(dirname ${BASH_SOURCE})/..; pwd)"</div><div>export APP_CONFIG_DIR="${APP_ROOT_DIR}/config"</div><div>export APP_TEMP_DIR="${APP_ROOT_DIR}/temp"</div><div>export APP_DATA_DIR="${APP_ROOT_DIR}/data"</div><div>export APP_ROOT_LOG_DIR="${APP_ROOT_DIR}/logs"</div><div>export APP_LOG_RETENTION="30"</div><div>export APP_WORKER_DIR="${APP_ROOT_DIR}/python"</div><div><br /></div><div>DATE=$(date +"%Y-%m-%d")</div><div><br /></div><div>export <b>APP_LOG_DIR</b>="${APP_ROOT_LOG_DIR}/${DATE}"</div><div><br /></div><div>if [ ! -e ${APP_LOG_DIR}  ]; then mkdir -p ${APP_LOG_DIR}; fi</div><div>if [ ! -e ${APP_TEMP_DIR} ]; then mkdir ${APP_TEMP_DIR}; fi</div><div>if [ ! -e ${APP_DATA_DIR} ]; then mkdir ${APP_DATA_DIR}; fi</div></div></div></div></foreignObject><text x="220" y="132" fill="#000000" text-anchor="middle" font-size="12px" font-family="Courier New">[Not supported by viewer]</text></switch></g><path d="M 261 121 L 410 121 Q 420 121 420 131 L 420 272.76" fill="none" stroke="#cc6600" stroke-width="2" stroke-miterlimit="10" pointer-events="none"/><path d="M 420 278.76 L 416 270.76 L 420 272.76 L 424 270.76 Z" fill="#cc6600" stroke="#cc6600" stroke-width="2" stroke-miterlimit="10" pointer-events="none"/><path d="M 172 135 L 40 135 Q 30 135 29.86 145 L 20.14 829 Q 20 839 30 839 L 129.76 839" fill="none" stroke="#00994d" stroke-width="2" stroke-miterlimit="10" pointer-events="none"/><path d="M 135.76 839 L 127.76 843 L 129.76 839 L 127.76 835 Z" fill="#00994d" stroke="#00994d" stroke-width="2" stroke-miterlimit="10" pointer-events="none"/><g transform="translate(151.5,296.5)"><switch><foreignObject style="overflow:visible;" pointer-events="all" width="787" height="57" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: inline-block; font-size: 12px; font-family: &quot;Courier New&quot;; color: rgb(0, 0, 0); line-height: 1.2; vertical-align: top; width: 788px; white-space: nowrap; word-wrap: normal;"><div xmlns="http://www.w3.org/1999/xhtml" style="display:inline-block;text-align:inherit;text-decoration:inherit;"><div><font face="Helvetica">The <font color="#cc6600"><b>app_profile</b></font> is much like the Linux .profile (or .bash_profile or equivalent). It is sourced each time a job is spawned, prior to any other execution.<br /><br />This configures important application-level settings, such as the root application path, log directory, etc.</font></div><br /></div></div></foreignObject><text x="394" y="35" fill="#000000" text-anchor="middle" font-size="12px" font-family="Courier New">[Not supported by viewer]</text></switch></g><g transform="translate(151.5,766.5)"><switch><foreignObject style="overflow:visible;" pointer-events="all" width="828" height="72" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: inline-block; font-size: 12px; font-family: &quot;Courier New&quot;; color: rgb(0, 0, 0); line-height: 1.2; vertical-align: top; width: 828px; white-space: normal; word-wrap: normal;"><div xmlns="http://www.w3.org/1999/xhtml" style="display:inline-block;text-align:inherit;text-decoration:inherit;"><div><font face="Helvetica">The <b><font color="#00994d">.lst</font></b> file is the workflow definition of a PyRunner job. Each line describes exactly 1 task to be executed as a part of an overall job execution.<br /><br /></font></div><div><font face="Helvetica">The MODULE_NAME and WORKER_NAME are key to indicating what code to execute for the task. The Module name refers to the Python module (in /my_project/python by default) that contains implemented Worker class that contains the Python code to execute when task is initiated.</font></div><br /></div></div></foreignObject><text x="414" y="42" fill="#000000" text-anchor="middle" font-size="12px" font-family="Courier New">[Not supported by viewer]</text></switch></g><rect x="0" y="0" width="920" height="40" fill="#ffffff" stroke="none" pointer-events="none"/><g transform="translate(1.5,2.5)"><switch><foreignObject style="overflow:visible;" pointer-events="all" width="247" height="34" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: inline-block; font-size: 30px; font-family: Helvetica; color: rgb(0, 0, 0); line-height: 1.2; vertical-align: top; width: 248px; white-space: nowrap; word-wrap: normal; font-weight: bold;"><div xmlns="http://www.w3.org/1999/xhtml" style="display:inline-block;text-align:inherit;text-decoration:inherit;">Application Code</div></div></foreignObject><text x="124" y="32" fill="#000000" text-anchor="middle" font-size="30px" font-family="Helvetica" font-weight="bold">Application Code</text></switch></g></g></svg>